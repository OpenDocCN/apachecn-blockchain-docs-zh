# 评级

> 原文:[https://docs.elrond.com/validators/rating](https://docs.elrond.com/validators/rating)

 每个单独的验证器都有一个**评级分数**，它表达了它的整体可靠性、性能和响应性。这是一个重要的值，节点操作符应该时刻注意它们的验证器的等级。

评级会影响验证者在每一轮中被选为共识的概率。一个高性能的验证器在共识中是首选的，而不是一个有时不能做出贡献或者不总是在线的验证器。

##### 提示

观察节点没有评级分数。只有验证器节点可以。

当验证者在下注后立即加入网络时，他们以初始分数`50`点开始。

验证者在一轮中获得或失去评分取决于他们在该轮中的角色(共识提议者对共识验证者)以及他们在该角色中的行为。评级罚金目前被设定为相应收益的`4`倍。这意味着一个验证器必须正确地执行一个动作 4 次，以补偿一次错误的执行。此外，连续亏损是*复合*，这意味着评级惩罚随着每次违规而增加。有关计算的详细信息，请参见[评级碎片验证器](/validators/rating#rating-shard-validators)和[评级元碎片验证器](/validators/rating#rating-metashard-validators)。

##### 提示

metashard 上的评级收益和损失不同于普通碎片上的收益和损失。

可以在 https://explorer.elrond.com/nodes 的埃尔隆德网络浏览器中找到单个验证器的过去和当前等级。使用“搜索”框找到一个验证器，并在列表中单击它的条目。“节点详细信息”页面打开，其中包含关于验证器的状态信息。

“节点详细信息”页面显示了过去时期的验证程序等级图:

![img](../Images/65776d293e20f19c0cc005d61d19b6a8.png)

X 轴代表时代，Y 轴代表等级。

## **监狱**

为了网络的整体健康，如果一个验证器的评级下降到低于`10`点，它将被**监禁**。被监禁意味着验证者将被从碎片中取出，它将不会参与共识，因此它将不会获得任何奖励。

然而，监禁也有例外。如果网络发现自己处于监禁验证器会将碎片的大小减少到允许的限度以下的情况，验证器将不会被监禁。

##### 重要

监禁只发生在一个时代的结束。这意味着具有低等级的验证器仍然有直到时期结束的时间来恢复。如果验证器未能恢复，并且在纪元结束时其等级保持在`10`以下，那么它将在监狱中开始新的纪元。

要恢复被监禁的验证器，其操作员必须向 Staking SmartContract 提交一个 **unjail** 事务。这使得验证器被带出“监狱”并被添加到网络中，就好像它是一个新的验证器一样。

一个恢复的验证器在它的非运行期间将是被动的。在紧接着的时期中，验证器将被分配给一个分片，在那里它必须等待整个时期并花费它来与它的新分片同步。

##### 评级重置

由于碎片重组，等级**不是**重置为 50。当由于洗牌而改变碎片时，验证器的等级被保留。

##### 提示

提高验证器等级的唯一方法是保持其最新，保持其良好连接，并确保其运行在符合[系统要求](/validators/system-requirements)的硬件上。

##### 同一台机器上的多个验证器

在一台机器上运行**多个验证器**会影响你的评分，从而影响*你的奖励，*如果这台机器没有运行的验证器的最低要求那么多的话。

# **共识概率**

评级影响验证者在一轮的共识组中被选中的概率。这是通过对每个验证器的选择概率应用**等级修饰符**来完成的。

如果没有评级，一个碎片的所有验证者都有相同的概率被一致选中。但是评级修饰符将基于它们的评级分数改变单个验证器的概率，以便给予性能验证器相对于平均验证器的优势，并且减少选择弱验证器的概率。

下表显示了验证者的评级如何影响其被一致选中的概率:

| 评级区间 | 修饰语 |
| --- | --- |
| 0-10 | -100% |
| 10-20 | -20% |
| 20-30 | -15% |
| 30-40 | -10% |
| 40-50 | -5% |
| 50-60 | 0% |
| 60-70 | +5% |
| 70-80 | +10% |
| 80-90 | +15% |
| 90-100 | +20% |

##### 重要

为一致性选择验证器的算法将这些修改的选择概率视为彼此相关。

# **校准**

假设一个 **24 小时长的纪元**，评级机制已经按照以下意图进行了校准:

*   一个新的验证器大约需要**。72 小时**达到最大等级，假设它仍然在同一个碎片中，不会被洗出(因此它将一直有生产力，没有任何等待时间)。
*   作为大宗交易验证者获得的评级收益金额应与作为大宗交易提议者获得的评级收益金额保持平衡。这种平衡必须考虑到这样一个事实，即被选为提议者的可能性比被一致选为分组验证者的可能性要小得多。

# **评级分片验证器**

## **评级切分块提议者**

被选择来提议特定回合的块的节点将:

*   成功提议的收获`0.23148`点:(1)块被正确构建，(2)它被共识验证者接受，以及(3)提议者应用最终签名并在整个网络中传播该块；
*   因一项不成功的提议而被扣分。

观察到损失比收益大 4 倍，这意味着提议者必须成功 4 次以获得单个错过的区块的损失点。

对提议者的评级甚至更严格:有一个复合惩罚规则，当它提议不成功时，节点的评级会下降得更快。

第一个不成功的提案将从提案人的评分中扣除`0.92592`分，但第二个不成功的提案将受到`0.92592 × 1.1`分的处罚。第三个，由`0.92592 × 1.1 × 1.1`担任。一般公式是:

0.92592×1.1^{cfp-1}0.92592×1.1^cfp^−1

其中`cfp`是连续失败提案的数量。

这种复合惩罚的效果是迅速监禁多次不成功的提议者。

## **分级分片块验证器**

参与一轮协商的节点(除了提议者之外)将:

*   成功验证的收获`0.00367`点:(1)提议者已经建立并提议了一个块，(2)验证者作为“签名者”出现在该块上；成为块的“签名者”意味着验证者已经批准了该块，并且足够快地成为第一批⅔ + 1 验证者之一，使其签名被块提议者接收；
*   因一项不成功的提议而被扣分。

注意，第一个 bulled 提到“提议者已经建造并提议了一个区块”。这句话暗示如果提议者在各自的回合中未能提议，所有验证者将失去评级。

此外，验证器必须是至少 1%的先前块中的“签名者”,否则它不会获得评级。换句话说:如果验证器在过去表现不佳，那么它必须在一段时间内表现良好，直到它开始获得收益。

# **评级元验证器**

metashard 的评级机制与普通碎片的评级机制相同，但是收益/损失值本身的配置不同。

## **评级 metashard 块提议者**

元链提议者将:

*   为成功的提案赢得`0.23148`分；
*   因一项不成功的提议而被扣分。

复合惩罚规则也适用于元链的块提议者。详见[评分分片分块提议人](#rating-the-shard-block-proposer)。

## **评级 metashard 块验证器**

参与元链共识的验证者将:

*   成功验证获得`0.00057`分；
*   因验证不成功而失去`0.00231`分。

来自[的评估碎片块验证器](#rating-the-shard-block-validator)的规则也适用于 metashard 验证器。